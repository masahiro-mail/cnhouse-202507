# X(Twitter) ãƒã‚¹ãƒˆåŸ‹ã‚è¾¼ã¿å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦
ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€CNPãƒˆãƒ¬ã‚«åˆå®¿LPã‚µã‚¤ãƒˆã«Xï¼ˆæ—§Twitterï¼‰ã®ãƒã‚¹ãƒˆå†…å®¹ã‚’åŸ‹ã‚è¾¼ã‚€3ã¤ã®æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ¯ å®Ÿè£…ã•ã‚ŒãŸæ–¹æ³•

### 1. **oEmbed APIæ–¹å¼**ï¼ˆæ¨å¥¨ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `app/components/TweetEmbed.tsx`
- **ãƒ¡ãƒªãƒƒãƒˆ**: å…¬å¼APIã€è‡ªå‹•æ›´æ–°ã€ç„¡æ–™
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: CORSåˆ¶é™ã€APIåˆ¶é™ã®å¯èƒ½æ€§

```typescript
// oEmbed APIã‚’ä½¿ç”¨ã—ã¦ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹ã‚’å–å¾—
const oembedUrl = `https://publish.twitter.com/oembed?url=${encodeURIComponent(tweetUrl)}`;
```

### 2. **æ‰‹å‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†**ï¼ˆæœ€ã‚‚ç¢ºå®Ÿï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `app/components/TweetContent.tsx`
- **ãƒ‡ãƒ¼ã‚¿**: `public/data/posts-enhanced.json`
- **ãƒ¡ãƒªãƒƒãƒˆ**: å®Œå…¨åˆ¶å¾¡ã€é«˜é€Ÿè¡¨ç¤ºã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: æ‰‹å‹•æ›´æ–°ãŒå¿…è¦

```json
{
  "content": {
    "text": "ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹",
    "author": "æŠ•ç¨¿è€…å",
    "authorHandle": "@handle",
    "timestamp": "2025-07-10T14:30:00Z",
    "images": ["image1.jpg"],
    "likes": 42,
    "retweets": 12,
    "replies": 8
  }
}
```

### 3. **ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰æ–¹å¼**ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `app/components/RelatedPosts.tsx`
- **ãƒ¡ãƒªãƒƒãƒˆ**: ç¢ºå®Ÿã«å‹•ä½œã€ã‚·ãƒ³ãƒ—ãƒ«
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹ãŒè¡¨ç¤ºã•ã‚Œãªã„

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æ‹¡å¼µç‰ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ç”¨
```typescript
import RelatedPostsEnhanced from './components/RelatedPostsEnhanced';

// ãƒšãƒ¼ã‚¸å†…ã§ä½¿ç”¨
<RelatedPostsEnhanced />
```

### è¡¨ç¤ºæ–¹æ³•ã®åˆ‡ã‚Šæ›¿ãˆ
1. **oEmbed API**: è‡ªå‹•çš„ã«ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹ã‚’å–å¾—
2. **æ‰‹å‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
3. **ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰**: åŸºæœ¬çš„ãªãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
app/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ TweetEmbed.tsx          # oEmbed APIå®Ÿè£…
â”‚   â”œâ”€â”€ TweetContent.tsx        # æ‰‹å‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º
â”‚   â”œâ”€â”€ RelatedPostsEnhanced.tsx # çµ±åˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ RelatedPosts.tsx        # å¾“æ¥ç‰ˆï¼ˆãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ï¼‰
â””â”€â”€ page.tsx                    # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸

public/
â””â”€â”€ data/
    â”œâ”€â”€ posts.json              # åŸºæœ¬ãƒã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
    â””â”€â”€ posts-enhanced.json     # æ‹¡å¼µãƒã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
```

## ğŸ¨ æ‰‹å‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¿½åŠ æ–¹æ³•

### 1. posts-enhanced.jsonã®ç·¨é›†
```json
{
  "useEmbedMethod": "manual",
  "posts": [
    {
      "id": 7,
      "postUrl": "https://x.com/username/status/1234567890",
      "content": {
        "text": "æ–°ã—ã„ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹",
        "author": "æŠ•ç¨¿è€…å",
        "authorHandle": "@username",
        "timestamp": "2025-07-15T12:00:00Z",
        "images": ["/images/tweet-image.jpg"],
        "likes": 25,
        "retweets": 5,
        "replies": 3
      }
    }
  ]
}
```

### 2. ç”»åƒã®è¿½åŠ 
1. `public/images/tweets/` ãƒ•ã‚©ãƒ«ãƒ€ã«ç”»åƒã‚’é…ç½®
2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ç”»åƒãƒ‘ã‚¹ã‚’æŒ‡å®š

### 3. è¡¨ç¤ºæ–¹æ³•ã®è¨­å®š
- `useEmbedMethod`: "oembed" | "manual" | "link"

## ğŸ’¡ æ¨å¥¨è¨­å®š

### æœ¬ç•ªç’°å¢ƒ
```json
{
  "useEmbedMethod": "manual"
}
```

### é–‹ç™ºç’°å¢ƒ
```json
{
  "useEmbedMethod": "oembed"
}
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### oEmbed APIãŒå‹•ä½œã—ãªã„å ´åˆ
1. CORSåˆ¶é™ã®ç¢ºèª
2. ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šç¢ºèª
3. æ‰‹å‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ–¹å¼ã¸ã®åˆ‡ã‚Šæ›¿ãˆ

### ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆ
1. ç”»åƒãƒ‘ã‚¹ã®ç¢ºèª
2. ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
3. Next.jsç”»åƒæœ€é©åŒ–è¨­å®šã®ç¢ºèª

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ç”»åƒæœ€é©åŒ–
```typescript
<Image
  src={image}
  alt="ç”»åƒèª¬æ˜"
  width={400}
  height={300}
  className="object-cover"
  sizes="(max-width: 768px) 100vw, 50vw"
/>
```

### 2. é…å»¶èª­ã¿è¾¼ã¿
```typescript
const [loading, setLoading] = useState(true);
```

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
try {
  const response = await fetch(url);
  // å‡¦ç†
} catch (error) {
  console.error('ã‚¨ãƒ©ãƒ¼:', error);
  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤º
}
```

## ğŸš€ ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

1. **Twitter API v2å¯¾å¿œ**: æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§ã‚ˆã‚Šå¤šæ©Ÿèƒ½ãªå®Ÿè£…
2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: WebSocketã‚’ä½¿ç”¨ã—ãŸè‡ªå‹•æ›´æ–°
3. **çµ±è¨ˆæƒ…å ±æ‹¡å¼µ**: ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæƒ…å ±ã®è¡¨ç¤º
4. **ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼**: ãƒ„ã‚¤ãƒ¼ãƒˆç”»åƒã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼è¡¨ç¤º

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **XSSå¯¾ç­–**: `dangerouslySetInnerHTML`ã®å®‰å…¨ãªä½¿ç”¨
2. **å¤–éƒ¨ãƒªãƒ³ã‚¯**: `rel="noopener noreferrer"`ã®è¨­å®š
3. **APIåˆ¶é™**: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®éµå®ˆ

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å®Ÿè£…ã«é–¢ã™ã‚‹è³ªå•ã‚„å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚